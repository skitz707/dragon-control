<?php
//-------------------------------------------------------------------------------------------
// takeDamage.php - Take damage/update HP.
// Written by: Michael C. Szczepanik
// rocknrollwontdie@gmail.com
// December 1st, 2017
//
// Change log:
//-------------------------------------------------------------------------------------------



//-------------------------------------------------------------------------------------------
// debug values
//-------------------------------------------------------------------------------------------
error_reporting(E_ALL);
ini_set('display_errors', 1);
//-------------------------------------------------------------------------------------------



//-------------------------------------------------------------------------------------------
// program includes
//-------------------------------------------------------------------------------------------
require_once("classes/DDDatabase.php");
//-------------------------------------------------------------------------------------------



//-------------------------------------------------------------------------------------------
// mainline
//-------------------------------------------------------------------------------------------
$database = new DDDatabase();
$questHeader = $database->getDatabaseRecord("dragons.questHeader", array("campaignId"=>$_GET['campaignId'], "statusFlag"=>"A"));
$database->updateDatabaseRecord("dragons.battleHeader", array("statusFlag"=>"F"), array("questId"=>$questHeader['questId'], "statusFlag"=>"A"));

header("Location: DCBattleManager.php?campaignId=" . $_GET['campaignId']);
//-------------------------------------------------------------------------------------------